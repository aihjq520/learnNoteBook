
## Diff算法

简单概括为

1. 新旧虚拟DOM对比的时候，Diff 算法比较只会在同层级进行，不会跨层级比较。
2. 首先比较两个节点的类型，如果类型不同，则废弃旧节点并用新节点替代。
3. 对于相同类型的节点，进一步比较它们的属性。记录属性差异，以便生成相应的补丁。
4. 如果两个节点相同，继续递归比较它们的子节点，直到遍历完整个树。
5. 如果节点有唯一标识，可以通过这些标识来快速定位相同标识的节点。


## 为什么不用index作为key


我们发现添加操作导致的整个列表的重新渲染，按道理来说，Diff 算法会复用后面的三项，因为它们只是位置发生了变化，内容并没有改变。但是我们回过头来发现，我们在前面添加了一项，导致后面三项的 index 变化，从而导致 key 值发生变化。Diff 算法失效了？


